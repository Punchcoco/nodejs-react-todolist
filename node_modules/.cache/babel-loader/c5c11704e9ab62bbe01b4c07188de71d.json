{"ast":null,"code":"import _regeneratorRuntime from \"/home/huotv/Documents/dev/mern-todo/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/huotv/Documents/dev/mern-todo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/huotv/Documents/dev/mern-todo/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/huotv/Documents/dev/mern-todo/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/huotv/Documents/dev/mern-todo/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/huotv/Documents/dev/mern-todo/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/huotv/Documents/dev/mern-todo/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/huotv/Documents/dev/mern-todo/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\n\nvar _this = this,\n    _jsxFileName = \"/home/huotv/Documents/dev/mern-todo/src/components/todos-list.component.js\";\n\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\n\nvar Todo = function Todo(props) {\n  return React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 6\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    className: props.todo.todo_completed ? 'completed' : '',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 7\n    },\n    __self: this\n  }, props.todo.todo_description), React.createElement(\"td\", {\n    className: props.todo.todo_completed ? 'completed' : '',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8\n    },\n    __self: this\n  }, props.todo.todo_responsible), React.createElement(\"td\", {\n    className: props.todo.todo_completed ? 'completed' : '',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9\n    },\n    __self: this\n  }, props.todo.todo_priority), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/edit/\" + props.todo._id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11\n    },\n    __self: this\n  }, \"Edit\")), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    onClick: _this.del,\n    className: \"btn btn-danger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    },\n    __self: this\n  }, \"Delete\")));\n};\n\nvar TodosList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TodosList, _Component);\n\n  function TodosList(props) {\n    var _this2;\n\n    _classCallCheck(this, TodosList);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(TodosList).call(this, props));\n    _this2.onLoadUser =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n\n              _this2.setState({\n                isLoading: true\n              });\n\n              _context.next = 4;\n              return axios.get('http://localhost:4000/todos', {\n                cancelToken: _this2.signal.token\n              });\n\n            case 4:\n              response = _context.sent;\n\n              _this2.setState({\n                todos: response.data,\n                isLoading: true\n              });\n\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n\n              if (axios.isCancel(_context.t0)) {\n                console.log('Error: ', _context.t0.message); // => prints: Api is being canceled\n              } else {\n                _this2.setState({\n                  isLoading: false\n                });\n              }\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n    _this2.state = {\n      todos: [],\n      isLoading: false\n    };\n    _this2.signal = axios.CancelToken.source();\n    _this2.del = _this2.del.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n    return _this2;\n  }\n\n  _createClass(TodosList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.onLoadUser();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this3 = this;\n\n      axios.get('http://localhost:4000/todos').then(function (res) {\n        _this3.setState({\n          todos: res.data\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.signal.cancel('Api is being canceled');\n    }\n  }, {\n    key: \"del\",\n    value: function del() {\n      axios.get('http://localhost:4000/todos/delete/' + this.props.todo._id).then(console.log('Deleted')).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  }, {\n    key: \"todoList\",\n    value: function todoList() {\n      return this.state.todos.map(function (x, i) {\n        return React.createElement(Todo, {\n          todo: x,\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"Todos List\"), React.createElement(\"table\", {\n        className: \"table table-striped\",\n        style: {\n          marginTop: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Description\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"Responsible\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Priority\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"Action\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Delete\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, this.todoList())));\n    }\n  }]);\n\n  return TodosList;\n}(Component);\n\nexport { TodosList as default };","map":{"version":3,"sources":["/home/huotv/Documents/dev/mern-todo/src/components/todos-list.component.js"],"names":["React","Component","axios","Link","Todo","props","todo","todo_completed","todo_description","todo_responsible","todo_priority","_id","del","TodosList","onLoadUser","setState","isLoading","get","cancelToken","signal","token","response","todos","data","isCancel","console","log","message","state","CancelToken","source","bind","then","res","catch","error","cancel","err","map","x","i","marginTop","todoList"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\nimport {Link} from 'react-router-dom';\n\nconst Todo = props =>(\n  <tr>\n    <td className={props.todo.todo_completed ? 'completed' : ''}>{props.todo.todo_description}</td>\n    <td className={props.todo.todo_completed ? 'completed' : ''}>{props.todo.todo_responsible}</td>\n    <td className={props.todo.todo_completed ? 'completed' : ''}>{props.todo.todo_priority}</td>\n    <td>\n      <Link to={\"/edit/\"+props.todo._id}>Edit</Link>\n    </td>\n    <td>\n      <button type=\"button\" onClick={this.del} className=\"btn btn-danger\">Delete</button>\n    </td>\n  </tr>\n)\n\nexport default class TodosList extends Component {\n  constructor(props){\n    super(props);\n\n    this.state = {todos:[],isLoading:false};\n    this.signal = axios.CancelToken.source();\n    this.del = this.del.bind(this);\n\n  }\n\n  componentDidMount() {\n    this.onLoadUser();\n  }\n\n  componentDidUpdate(){\n    axios.get('http://localhost:4000/todos').then(res=>{\n      this.setState({todos:res.data});\n      })\n    .catch((error)=>{console.log(error);})\n  }\n\n  componentWillUnmount() {\n    this.signal.cancel('Api is being canceled');\n}\n\n  onLoadUser = async () => {\n    try {\n      this.setState({ isLoading: true });\n      const response = await axios.get('http://localhost:4000/todos', {\n        cancelToken: this.signal.token,\n      })\n      this.setState({todos: response.data, isLoading: true });\n    } catch (err) {\n      if (axios.isCancel(err)) {\n        console.log('Error: ', err.message); // => prints: Api is being canceled\n      } else {\n        this.setState({ isLoading: false });\n      }\n    }\n    }\n\n  del(){\n    axios.get('http://localhost:4000/todos/delete/'+this.props.todo._id).then(console.log('Deleted')).catch(err=>console.log(err));\n  }\n\n    todoList(){\n      return this.state.todos.map((x,i)=>{\n        return <Todo todo={x} key={i} />;\n      })\n    }\n\n\n  render(){\n    return(\n      <div>\n        <h3>Todos List</h3>\n        <table className=\"table table-striped\" style={{marginTop: 20}}>\n          <thead>\n            <tr>\n            <th>Description</th>\n            <th>Responsible</th>\n            <th>Priority</th>\n            <th>Action</th>\n            <th>Delete</th>\n            </tr>\n          </thead>\n          <tbody>\n            {this.todoList()}\n          </tbody>\n        </table>\n      </div>\n    )\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}